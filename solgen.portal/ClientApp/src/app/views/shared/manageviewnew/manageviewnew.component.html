<!-- Modal manage view start -->

<div class="modal my-popups right fade" id="manageview" tabindex="-1" role="dialog" bsModal #templateManageView="bs-modal" [config]="{backdrop: 'static'}">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Manage View</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="close()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body w-100">
        <div class="row border-bottom pb-3">
          <div class="col-10">
            <form class="searchfield  mr-1">
              <input class="form-control input-sm" type="text" [(ngModel)]='searchTxt' name="searchTxtN" placeholder="Search By Name" (keyup)='updateFilter($event)'>
              <!--<input type="search" [(ngModel)]='searchTxt' class="form-control input-sm" placeholder="Search by Name">-->
            </form>
            <a class="btn btn-dark mr-1" href="javascript:void(0);" (click)="search()"><span><i class="feather-search"></i> </span></a>
            <a class="btn btn-white mr-1" href="javascript:void(0);" (click)="onReset_Click()"><span><i class="feather-repeat"></i> </span></a>
          </div>
          <div class="col-2" *ngIf="companyadmin">
            <div class="dt-buttons btn-iconres">
              <a class="btn btn-success" href="javascript:void(0);" (click)="AddPage()"><span><i class="feather-plus"></i> Add More</span></a>
            </div>
          </div>
        </div>
        <div class="table-responsive mt-1 w-100" #tableWrapper>
          <ngx-datatable *ngIf="!isHidden" #table class="bootstrap table table-hover table-dynamic w-100"
                         [rows]="pagedData.data"
                         [columnMode]="'force'"
                         [scrollbarH]="true"
                         [rowHeight]="'40'"
                         [headerHeight]="40"
                         [footerHeight]="40"
                         [rowClass]="getRowClass"
                         [reorderable]="true"
                         [externalPaging]="true"
                         [externalSorting]="true"
                         [loadingIndicator]="loadSave"
                         [count]="pagedData.pager.totalItems"
                         [offset]="currentPage"
                         [limit]="pagedData.pager.pageSize"
                         (page)='setPage($event)'>
            <ngx-datatable-column name="View Name" prop="view_name" [sortable]="false">
              <ng-template let-row="row" align="left" ngx-datatable-cell-template>
                <div class="text-left" *ngIf="row.is_apply">
                  <a href="javascript:void(0);" (click)="applyView(row.custom_view_id)" title={{row.view_name}}> {{row.view_name}}</a>
                </div>
                <div class="text-left" *ngIf="!row.is_apply">
                  <a href="javascript:void(0);" (click)="applyView(row.custom_view_id)" title={{row.view_name}}>{{row.view_name}}</a>
                </div>
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Set Default" [sortable]="false" headerClass="text-center" [maxWidth]="100">
              <ng-template let-row="row" ngx-datatable-cell-template>
                <div class="text-center w-100" *ngIf="row.is_default == 0">
                  <label class="switch">
                    <input type="checkbox" (change)="GetcustomDefaultView(row.custom_view_id,row.view_name,$event)">
                    <span class="slider round"> </span>
                  </label>
                  <!--<a href="javascript:void(0);" class="step-no step-sm bg-secondary" (click)="GetcustomDefaultView(row.custom_view_id,row.view_name)"><i class="feather-check text-white"></i></a>-->
                </div>
                <div class="text-center w-100" *ngIf="row.is_default == 1">
                  <label class="switch">
                    <input type="checkbox" checked="checked" disabled>
                    <span class="slider round"></span>
                  </label>
                  <!--<a href="javascript:void(0);" class="step-no step-sm step-green"><i class="feather-check text-white"></i></a>-->
                  <!--<a><    i title="Default View"  class="fa  fa-cube text-danger icon_tick"></i></a>-->
                </div>
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Edit" [sortable]="false" headerClass="text-center" [maxWidth]="100">
              <ng-template let-row="row" ngx-datatable-cell-template>
                <div class="text-center w-100" *ngIf="row.view_name == 'Company Default'">
                  <!--<a href="javascript:void(0);" class="btn-edit"><i class="fa fa-pencil text-success"></i></a>-->
                </div>
                <div class="text-center w-100" *ngIf="row.view_name != 'Company Default'"><a href="javascript:void(0);" class="btn-edit"><i title="Click to edit." (click)="EditPage(row.custom_view_id)" class="feather-edit-2 text-success"></i></a></div>
              </ng-template>
            </ngx-datatable-column>

            <ngx-datatable-column name="Clone" [sortable]="false" headerClass="text-center" [maxWidth]="100">
              <ng-template let-row="row" ngx-datatable-cell-template>
                <div class="text-center w-100">
                  <a href="javascript:void(0);" class="btn-Clone">
                    <i title="Click to Clone." (click)="ClonePage(row.custom_view_id)"
                       class="feather-copy text-primary"></i>
                  </a>
                </div>
              </ng-template>
            </ngx-datatable-column>

            <ngx-datatable-column name="Delete" [sortable]="false" headerClass="text-center" [maxWidth]="100">
              <ng-template let-row="row" ngx-datatable-cell-template>
                <div class="text-center w-100" *ngIf="row.view_name == 'Company Default'">
                </div>
                <div class="text-center w-100" *ngIf="row.view_name != 'Company Default' && row.is_default == 1"><a href="javascript:void(0);" class="btn-delete disabled"><i class="feather-trash-2"></i></a></div>
                <div class="text-center w-100" *ngIf="row.view_name != 'Company Default' && row.is_default != 1"><a href="javascript:void(0);" class="btn-delete"><i title="Click to delete." (click)="Delete(row)" class="feather-trash-2 text-danger"></i></a></div>
              </ng-template>
            </ngx-datatable-column>


            <ngx-datatable-footer>
              <ng-template ngx-datatable-footer-template
                           let-rowCount="rowCount"
                           let-pageSize="pageSize"
                           let-selectedCount="selectedCount"
                           let-currentPage="currentPage"
                           let-offset="offset"
                           let-isVisible="isVisible">
                <div>
                  <div style="color:black; margin-right:10px;" class="page-size-record">
                    <span style="text-align:right; width:80px;vertical-align: middle;">
                      <ng-select [searchable]="false" [items]="lstPageSize" appendTo="body" [(ngModel)]='pageSizeValue' name="pageSizeValueN" dropzone="fixed" [clearable]="false" (change)="onChange($event)" draggable="false" [closeOnSelect]="true"
                                 bindLabel="text" bindValue="text"></ng-select>
                    </span>
                  </div>
                </div>

                <div class="page-count" *ngIf='(rowCount  > 0)'>
                  Showing {{(pagedData.pager.currentPage+1 - 1 )* pageSizeValue + 1}} to
                  {{(rowCount> ((pagedData.pager.currentPage+1)*pageSizeValue))?((pagedData.pager.currentPage+1)*pageSizeValue):(rowCount)}} out of {{rowCount}} enteries
                </div>

                <datatable-pager [pagerLeftArrowIcon]="'feather-chevrons-left'"
                                 [pagerRightArrowIcon]="'feather-chevrons-right'"
                                 [pagerPreviousIcon]="'feather-chevron-left'"
                                 [pagerNextIcon]="'feather-chevron-right'"
                                 [page]="pagedData.pager.currentPage+1"
                                 [size]="pageSizeValue"
                                 [count]="pagedData.pager.totalItems"
                                 [hidden]="!((rowCount / pageSize) > 1)"
                                 (change)="setPage($event)">
                </datatable-pager>
              </ng-template>
            </ngx-datatable-footer>
          </ngx-datatable>
        </div>
      </div>

      <div class="modal-footer">
        <!-- <button type="button" class="btn btn-success"><i class="feather-save"></i> Ok</button> -->
        <button type="button" class="btn btn-danger" data-dismiss="modal" (click)="close()"><i class="feather-x"></i> Close</button>
      </div>
    </div>
  </div>
</div>





<div class="modal my-popups right fade" id="editmodal" tabindex="-1" role="dialog" bsModal #templateSecondaryManageView="bs-modal">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Manage View</h5>
        <button type="button" class="close" (click)="closesecond()" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <ul class="nav nav-tabs nav-cust" id="myTab" role="tablist">
          <!--<li class="nav-item">
            <a class="nav-link active" id="general-tab" data-toggle="tab" href="#general" role="tab">General</a>
          </li>-->
          <li class="nav-item">
            <a class="nav-link active" id="selcolumn-tab" data-toggle="tab" href="#selcolumn" role="tab">Select Column</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" id="filter-tab" data-toggle="tab" href="#filter" role="tab">Filter</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" id="sorting-tab" data-toggle="tab" href="#sorting"  (click)="Sorting()"  role="tab">Sorting</a>
          </li>
          <li class="nav-item right-btnli btn-iconres">
            <a href="javascript:void(0);" (click)="SaveAllFields()" class="btn btn-success mr-1"><i class="feather-save pr-2"></i>Submit</a>
            <a href="javascript:void(0);" (click)="closetoList()" class="btn btn-danger"><i class="feather-x pr-2"></i>Cancel</a>

          </li>
        </ul>

        <div class="tab-content" id="myTabContent">
          <!--<div class="tab-pane fade show active" id="general" role="tabpanel">
                     General tab content
                    <form [formGroup]="AddViewForm">
                      <div class="col-md-12">
                        <div class="row">
                          <div class="col-md-6">
                            <div class="form-group">
                              <label>View Name: <span class="text-danger">*</span></label>
                              <input type="text" #viewname class="form-control" formControlName="select" placeholder="Select"
                                     [ngClass]="{'is-invalid': (select.invalid && (select.dirty || select.touched) && (select.errors?.required || select.errors?.maxlength)) }">
                              <small *ngIf="select.invalid && (select.dirty || select.touched) && select.errors?.required"
                                     class="text-danger">View Name is required</small>
                              <small *ngIf="select.invalid && (select.dirty || select.touched) && select.errors?.maxlength"
                                     class="text-danger">View Name must be less than 100 characters.</small>

                            </div>
                          </div>
                          <div class="col-md-6">
                            <div class="form-group">
                              <label>Apply To: <span class="text-danger">*</span></label>
                              <div class="form-group">
                                <div class="custom-control custom-radio custom-control-inline pl-0" *ngIf="companyadmin">
                                  <input formControlName="radiogroup" type="radio" id="test1" name="radiogroup" value="Only For Me">
                                  <label class="custom-control-label" for="test1">Only For Me</label>
                                </div>
                                <div class="custom-control custom-radio custom-control-inline pl-0" *ngIf ="!companyadmin">
                                  <input formControlName="radiogroup"  type="radio"   checked="checked"    id="test1" name="radiogroup" value="Only For Me">
                                  <label class="custom-control-label" for="test1">Only For Me</label>
                                </div>
                                <div class="custom-control custom-radio custom-control-inline pl-0">
            <input type="radio"
                   value="Others"
                   formControlName="radiogroup" id="test2" name="radiogroup">
            <label class="custom-control-label" for="test2">Others</label>
          </div>
                                <div class="custom-control custom-radio custom-control-inline pl-0" *ngIf="companyadmin">

                                  <input type="radio" id="test3" name="radiogroup" value="All" formControlName="radiogroup">
                                  <label class="custom-control-label" for="test3">All</label>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>

                      </div>
                    </form>
                  </div>-->
          <div class="tab-pane fade show active" id="selcolumn" role="tabpanel">
            <form [formGroup]="AddViewForm">
              <div class="row">
                <div class="col-md-6">
                  <div class="form-group">
                    <label>View Name: <span class="text-danger">*</span></label>
                    <input type="text" #viewname class="form-control" formControlName="select" placeholder="Enter View Name"
                           [ngClass]="{'is-invalid': (select.invalid && (select.dirty || select.touched) && (select.errors?.required || select.errors?.maxlength)) }">
                    <small *ngIf="select.invalid && (select.dirty || select.touched) && select.errors?.required"
                           class="text-danger">View Name is required</small>
                    <!--<small *ngIf="select.invalid && (select.dirty || select.touched) && select.errors?.maxlength"
                    class="text-danger">View Name must be less than 100 characters.</small>-->

                  </div>
                </div>
                <div class="col-md-6 pl-3">
                  <div class="form-group pt-2">
                    <label>Apply To: <span class="text-danger">*</span></label>
                    <div class="form-group">
                      <div class="custom-control custom-radio custom-control-inline pl-0" *ngIf="companyadmin">
                        <input formControlName="radiogroup" type="radio" id="test1" name="radiogroup" value="Only For Me">
                        <label class="custom-control-label" for="test1">Only For Me</label>
                      </div>
                      <div class="custom-control custom-radio custom-control-inline pl-0" *ngIf="!companyadmin">
                        <input formControlName="radiogroup" type="radio" id="test4" name="radiogroup" value="Only For Me">
                        <label class="custom-control-label" for="test4">Only For Me</label>
                      </div>
                      <div class="custom-control custom-radio custom-control-inline pl-0" *ngIf="companyadmin">
                        <input type="radio" value="Roles" formControlName="radiogroup" id="test2" name="radiogroup" (change)="OnChangeApplyToValue($event)">
                        <label class="custom-control-label" for="test2">Roles</label>
                      </div>
                      <!--<div class="custom-control custom-radio custom-control-inline pl-0">
                        <input type="radio"
                               value="Others"
                               formControlName="radiogroup" id="test2" name="radiogroup">
                        <label class="custom-control-label" for="test2">Others</label>
                      </div>-->
                      <div class="custom-control custom-radio custom-control-inline pl-0" *ngIf="companyadmin">
                        <input type="radio" id="test3" name="radiogroup" value="All" formControlName="radiogroup">
                        <label class="custom-control-label" for="test3">All</label>
                      </div>
                    </div>
                  </div>
                </div>

              </div>
              <div class="row" *ngIf="AddViewForm.value.radiogroup == 'Roles'">
                <div class="col-md-6" *ngIf="companyadmin">
                  <div class="form-group">
                    <label>Roles: <span class="text-danger">*</span></label>
                    <!--(applicantForm.get(inner.form_controlName)?.invalid && (applicantForm.get(inner.form_controlName)?.dirty || applicantForm.get(inner.form_controlName)?.touched) && (applicantForm.get(inner.form_controlName)?.errors?.required-->
                    <ng-select [items]="RoleList" [loading]="loadSave" placeholder="Select Roles" formControlName="selectedRole" multiple="true"
                               bindLabel="text" bindValue="value"
                               [ngClass]="{'is-invalid': (AddViewForm.get('selectedRole')?.errors?.required && AddViewForm.get('selectedRole')?.invalid && (AddViewForm.get('selectedRole')?.dirty || AddViewForm.get('selectedRole')?.touched))}"></ng-select>
                    <small *ngIf="(AddViewForm.get('selectedRole')?.errors?.required && AddViewForm.get('selectedRole')?.invalid && (AddViewForm.get('selectedRole')?.dirty || AddViewForm.get('selectedRole')?.touched))" class="text-danger">Role is required</small>
                  </div>
                </div>
              </div>
            </form>
            <hr class="mb-3" />
            <div class="clearfix"></div>

            <!-- select column tab content -->
            <div class="d-flex flex-wrap">
              <div class="mover-panel-box col-md-5">
                <div class="heading-border">
                  <h5 class="h5"><span>Available Fields</span></h5>
                </div>
                <div class="heading-border">
                  <input class="form-control input-sm" type="text" [(ngModel)]='FieldlistFilter' name="FieldlistFilterN" placeholder="Search By Name" (keyup)='updateFieldlistFilter($event)' (keypress)="noSpecialChars($event)">
                </div>
                <!--<div class="py-2 d-inline-block">
                  <form class="searchfield  mr-1"><input type="search" class="form-control input-sm" placeholder="Search by Name"> </form>
                  <a class="btn btn-success mr-1" href="#"><span><i class="feather-search"></i> </span></a>
                </div>-->
                <div class="listing border-top">
                  <div class="table-responsive border">
                    <table id="example" class="table table-bordered ">
                      <thead class="thead-bg">
                        <tr role="row"><th scope="col" class="sorting_asc" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Field Name: activate to sort column ascending">Field Name</th></tr>
                      </thead>
                      <tbody>
                        <tr role="row" class="odd">
                          <td class="p-0">
                            <div [ngClass]="{'modal-bck':color.selected}" (click)='OnItemSelected(color)' *ngFor="let color of customFieldLeadListSecond" class="manageview-dragable">
                              {{color.text}}
                            </div>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
              <div class="mover-controls col-md-2">
                <button type="button" (click)="OnShiftAllFromDragToDrop()">
                  <i aria-hidden="true"
                     class="fa fa-angle-double-down fa-2x d-md-none"></i><i aria-hidden="true" class="fa fa-angle-double-right fa-2x d-none d-md-block"></i>
                </button>

                <button type="button" (click)="OnShiftOneFromDragToDrop()"><i aria-hidden="true" class="fa fa-angle-down fa-2x d-md-none"></i><i aria-hidden="true" class="fa fa-angle-right fa-2x d-none d-md-block"></i></button>

                <button type="button" (click)="OnShiftOneFromDropToDrag()"><i aria-hidden="true" class="fa fa-angle-up fa-2x d-md-none"></i><i aria-hidden="true" class="fa fa-angle-left fa-2x d-none d-md-block"></i></button>

                <button (click)="OnShiftAllFromDropToDrag()" type="button"><i aria-hidden="true" class="fa fa-angle-double-up fa-2x d-md-none"></i><i aria-hidden="true" class="fa fa-angle-double-left fa-2x d-none d-md-block"></i></button>
              </div>
              <div class="mover-panel-box col-md-5">
                <div class="heading-border">
                  <h5 class="h5"><span>Selected Fields</span></h5>
                </div>
                <div class="table-responsive border">
                  <table class="table table-bordered selected-fields">
                    <thead>
                      <tr>
                        <th>
                          Field Name
                        </th>
                        <th class="text-center">
                          Sortable
                        </th>
                      </tr>
                    </thead>
                    <p-orderList #droppedView [value]="droped" dragdrop="true">
                      <ng-template let-c pTemplate="item">
                        <tr [ngClass]="{'modal-bck':c.selected}" (click)="onDroppedItemClick(c)">
                          <td>
                            <span>
                              {{c.text}}
                            </span>
                          </td>
                          <td class="text-center">
                            <div class="custom-control custom-checkbox">
                              <input type="checkbox" class="custom-control-input" [id]="c.value" (change)="c.isChecked = !c.isChecked" [checked]="c.isChecked">
                              <label class="custom-control-label" [for]="c.value">&nbsp;</label>
                            </div>

                          </td>
                        </tr>
                      </ng-template>
                    </p-orderList>
                  </table>
                </div>


                <!--<div class="listing border-top">
                  <div class="table-responsive">
                    <div class="drop" pDroppable="color" (onDrop)="drop($event)">
                      <table class="table table-bordered">
                        <thead>
                          <tr>
                            <th>
                              Field Name
                            </th>
                            <th>
                              Sortable
                            </th>
                          </tr>
                        </thead>
                        <tbody #droppedView *ngFor="let c of droped">
                          <tr>
                            <td pDraggable="c"
                                (onDragStart)="dragStartBack($event,c)"
                                (onDragEnd)="dragEndBack($event)">
                              {{c.text}}
                            </td>
                            <td>
                              <div class="custom-control custom-checkbox">
                                <input type="checkbox" class="custom-control-input" [id]="c.value" (change)="c.isChecked = !c.isChecked" [checked]="c.isChecked">
                                <label class="custom-control-label" [for]="c.value">&nbsp;</label>
                              </div>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>-->
              </div>
            </div>
          </div>

          <div class="tab-pane fade" id="filter" role="tabpanel">
            <form [formGroup]="manageViewForm" autocomplete="off">
              <div class="table-responsive">
                <table id="example" class="table ">
                  <thead class="thead-bg">
                    <tr>
                      <th scope="col">Field Name</th>
                      <th scope="col">Conditional Operator</th>
                      <th scope="col">Value</th>
                      <th scope="col"></th>
                      <th scope="col"></th>
                    </tr>
                  </thead>
                  <tbody formArrayName="fields">
                    <tr [formGroupName]="i" *ngFor="let field of fields.controls; let i=index">
                      <td>
                        <div class="form-group" style="width: 150px; padding: 0px;  margin: 0px; float: left;">
                          <ng-select [items]="customFieldList1" [closeOnSelect]="true" placeholder="Select field name" formControlName="filedNameId" (change)="onChangeField($event,field,i)"
                                     bindLabel="display" bindValue="value" [ngClass]="{'is-invalid': (field.controls.filedNameId.invalid && (field.controls.filedNameId.dirty || field.controls.filedNameId.touched) && field.controls.filedNameId.errors?.required) }"></ng-select>
                          <small *ngIf="field.controls.filedNameId.invalid && (field.controls.filedNameId.dirty || field.controls.filedNameId.touched) && field.controls.filedNameId.errors?.required"
                                 style="color:red;">Please select Field Name</small>
                        </div>
                      </td>
                      <td>
                        <div class="form-group" style="width: 150px;">
                          <ng-select [items]="(field.get('operators')==null ? null : field.get('operators').value)" [closeOnSelect]="true" placeholder="Select operator"
                                     (click)="loadOperator(field.controls.filedNameId,field,i)" formControlName="operatorId" (change)="onChangeOperator($event,field)"
                                     bindLabel="text" bindValue="value" [ngClass]="{'is-invalid': (field.controls.operatorId.invalid && (field.controls.operatorId.dirty || field.controls.operatorId.touched) && field.controls.operatorId.errors?.required) }"></ng-select>
                          <small *ngIf="field.controls.operatorId.invalid && (field.controls.operatorId.dirty || field.controls.operatorId.touched) && field.controls.operatorId.errors?.required"
                                 style="color:red;">Please select Operator</small>
                        </div>
                      </td>
                      <td>
                        <div class="form-group" *ngIf="field.get('dtCode') != null && !field.get('dtCode').value && field.get('fieldText').value!='datetime' && field.get('fieldText').value!='date' && field.controls.operatorId.value!='18' && field.controls.operatorId.value!='19' && field.controls.operatorId.value!='20'" style="width: 100%;">

                          <input type="text" class="form-control" formControlName="txtvaluefrom" maxlength="50" *ngIf="field.get('fieldText').value != 'decimal' && field.get('fieldText').value != 'int' && field.get('fieldText').value != 'bigint'"
                                 placeholder="Enter Value" (keyup)="onKey($event)"
                                 [ngClass]="{'is-invalid': (field.controls.txtvaluefrom.invalid && (field.controls.txtvaluefrom.dirty || field.controls.txtvaluefrom.touched) && (field.controls.txtvaluefrom.errors?.required || field.controls.txtvaluefrom.errors?.maxlength)) }">


                          <input type="text" class="form-control" formControlName="txtvaluefrom" maxlength="50"
                                 placeholder="Enter Value" (keyup)="onKey($event)" (keypress)="numberOnly($event)" *ngIf="field.get('fieldText').value == 'decimal' || field.get('fieldText').value == 'int' || field.get('fieldText').value == 'bigint'"
                                 [ngClass]="{'is-invalid': (field.controls.txtvaluefrom.invalid && (field.controls.txtvaluefrom.dirty || field.controls.txtvaluefrom.touched) && (field.controls.txtvaluefrom.errors?.required || field.controls.txtvaluefrom.errors?.maxlength)) }">


                          <small *ngIf="field.controls.txtvaluefrom.invalid && (field.controls.txtvaluefrom.dirty || field.controls.txtvaluefrom.touched) && field.controls.txtvaluefrom.errors?.required"
                                 class="text-danger">Value is required</small>


                        </div>
                        <div *ngIf="field.get('dtCode') != null && !field.get('dtCode').value && field.get('fieldText').value=='date' && field.controls.operatorId.value!='19' && field.controls.operatorId.value!='20' " style="width: 100%; padding: 0px; margin: 0px; float: left;">
                          <p-calendar [showIcon]="true" class="calendarwidth" inputStyleClass="form-control start-date" formControlName="txtvaluefrom" hideOnDateTimeSelect="true"
                                      [readonlyInput]="true"
                                      [showTime]="false" dateFormat="mm/dd/yy" showButtonBar="true" [monthNavigator]="true" [yearNavigator]="true" yearRange="1919:2030"></p-calendar>
                          <small *ngIf="field.controls.txtvaluefrom.invalid && (field.controls.txtvaluefrom.dirty || field.controls.txtvaluefrom.touched) && field.controls.txtvaluefrom.errors?.required"
                                 class="text-danger">Value is required</small>
                        </div>

                        <div *ngIf="field.get('dtCode') != null && !field.get('dtCode').value && field.get('fieldText').value=='datetime' && field.controls.operatorId.value!='19' && field.controls.operatorId.value!='20' " style="width: 100%; padding: 0px;  margin: 0px; float: left;">
                          <p-calendar [showIcon]="true" class="calendarwidth" inputStyleClass="form-control start-date " formControlName="txtvaluefrom" hideOnDateTimeSelect="true"
                                      [showTime]="true" inputId="timeonly" dateFormat="mm/dd/yy" showButtonBar="true" [monthNavigator]="true" [yearNavigator]="true" yearRange="2000:2030"
                                      [readonlyInput]="true"
                                      [hourFormat]="(timeFormat==24)?24:12"></p-calendar>
                          <small *ngIf="field.controls.txtvaluefrom.invalid && (field.controls.txtvaluefrom.dirty || field.controls.txtvaluefrom.touched) && field.controls.txtvaluefrom.errors?.required"
                                 class="text-danger">Value is required</small>
                        </div>

                        <div class="form-group" *ngIf="field.get('dtCode') != null && field.get('dtCode').value
                             && field.controls.operatorId.value!='18' && field.controls.operatorId.value!='19' && field.controls.operatorId.value!='20'" style="width: 100%; padding: 0px; margin: 0px; float: left;">
                          <ng-select [items]="DdlValues[i]" [closeOnSelect]="true" placeholder="Select Value" formControlName="txtvaluefrom" [multiple]="true"
                                     bindLabel="name" bindValue="value"
                                     (clear)="onClearLang(DdlValues[i],i,field)"
                                     (scrollToEnd)="onScrollToEnd(DdlValues[i],i,field)" [virtualScroll]="true" (keyup)="onKeySelect($event,DdlValues[i],i,field)"
                                     [ngClass]="{'is-invalid': (field.controls.txtvaluefrom.invalid && (field.controls.txtvaluefrom.dirty || field.controls.txtvaluefrom.touched) && field.controls.txtvaluefrom.errors?.required) }"></ng-select>


                          <small *ngIf="field.controls.txtvaluefrom.invalid && (field.controls.txtvaluefrom.dirty || field.controls.txtvaluefrom.touched) && field.controls.txtvaluefrom.errors?.required"
                                 style="color:red;">Please select Field Name</small>
                        </div>
                      </td>
                      <td class="text-center">
                        <div class="form-group" *ngIf="field.controls.operatorId.value=='8' && field.get('fieldText').value!='datetime' && field.get('fieldText').value!='date' " style="width: 100%; padding: 0px;  margin: 0px; float: left;">
                          <input type="text" class="form-control" formControlName="txtvalueto" maxlength="50" placeholder="Enter Value" *ngIf="field.get('fieldText').value != 'decimal' && field.get('fieldText').value != 'int' && field.get('fieldText').value != 'bigint'"
                                 [ngClass]="{'is-invalid': (field.controls.txtvalueto.invalid && (field.controls.txtvalueto.dirty || field.controls.txtvalueto.touched) && (field.controls.txtvalueto.errors?.required || field.controls.txtvalueto.errors?.maxlength)) }">

                          <input type="text" class="form-control" formControlName="txtvalueto" maxlength="50" placeholder="Enter Value" (keypress)="numberOnly($event)" *ngIf="field.get('fieldText').value == 'decimal' || field.get('fieldText').value == 'int' || field.get('fieldText').value == 'bigint'"
                                 [ngClass]="{'is-invalid': (field.controls.txtvalueto.invalid && (field.controls.txtvalueto.dirty || field.controls.txtvalueto.touched) && (field.controls.txtvalueto.errors?.required || field.controls.txtvalueto.errors?.maxlength)) }">

                          <small *ngIf="field.controls.txtvalueto.invalid && (field.controls.txtvalueto.dirty || field.controls.txtvalueto.touched) && field.controls.txtvalueto.errors?.required"
                                 class="text-danger">Value is required</small>
                        </div>
                        <div *ngIf="field.controls.operatorId.value=='8' && field.get('fieldText').value=='datetime'" style="width: 100%; padding: 0px;  margin: 0px; float: left;">
                          <p-calendar [showIcon]="true" class="calendarwidth" inputStyleClass="form-control start-date " formControlName="txtvalueto" hideOnDateTimeSelect="true"
                                      [showTime]="true" inputId="timeonly" dateFormat="mm/dd/yy" showButtonBar="true" [monthNavigator]="true" [yearNavigator]="true" yearRange="2000:2030"
                                      [readonlyInput]="true" [hourFormat]="(timeFormat==24)?24:12"></p-calendar>
                          <small *ngIf="field.controls.txtvalueto.invalid && (field.controls.txtvalueto.dirty || field.controls.txtvalueto.touched) && field.controls.txtvalueto.errors?.required"
                                 class="text-danger">Value is required</small>
                        </div>

                        <div *ngIf="field.controls.operatorId.value=='8' && field.get('fieldText').value=='date'" style="width: 100%; padding: 0px;  margin: 0px; float: left;">
                          <p-calendar [showIcon]="true" class="calendarwidth" inputStyleClass="form-control start-date" formControlName="txtvalueto" hideOnDateTimeSelect="true"
                                      [readonlyInput]="true"
                                      [showTime]="false" dateFormat="mm/dd/yy" showButtonBar="true" [monthNavigator]="true" [yearNavigator]="true" yearRange="1919:2030"></p-calendar>
                          <small *ngIf="field.controls.txtvalueto.invalid && (field.controls.txtvalueto.dirty || field.controls.txtvalueto.touched) && field.controls.txtvalueto.errors?.required"
                                 class="text-danger">Value is required</small>
                        </div>
                      </td>
                      <td style="min-width:100px;">
                        <div *ngIf="field.controls.type.value!=null && field.controls.type.value!=''" class="d-inline-block mr-2">
                          <span class="or-and rounded-circle">{{field.controls.type.value}}</span>
                        </div>
                        <div class="form-group mt-2 mb-0 d-inline-block float-right">
                          <a *ngIf="i > 0" href="javascript:void(0);" (click)="removeFields(i)"><i class="feather-trash-2 text-danger" style="font-size:18px;"></i></a>
                        </div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <div class="col-lg-12 px-0 text-center mt-2 mb-4 bg-light py-2">
                <!--<a href="javascript:void(0);" class="btn btn-success" (click)="addFields()"><i class="feather-plus pr-2"></i>Add</a>-->
                <ng-select [items]="ddlData" placeholder="Add" #condition
                           bindLabel="name" bindValue="id" (change)="addFields($event.name)" style="max-width:120px;display:inline-block;"></ng-select>
              </div>


            </form>
          </div>
          <div class="tab-pane fade" id="sorting" role="tabpanel">
            <div class="mover-panel-box w-100">
              <div class="heading-border">
                <h5 class="h5"><span class="mt-0">Available Fields For Sorting</span></h5>
              </div>
              <div class="table-responsive border">
                <table class="table table-bordered selected-fields">
                  <thead>
                    <tr>
                      <th style="width:70%;">
                        Field Name
                      </th>
                      <th class="text-center">
                        Sort By
                      </th>
                    </tr>
                  </thead>
                  <p-orderList #droppedView [value]="sortinglist" dragdrop="true">
                    {{sorting | json}}
                    <ng-template let-c let-i="index" pTemplate="item">
                      <tr [ngClass]="{'modal-bck':c.selected}">
                        <td style="width:70%;">
                          <span>
                            {{c.text}}
                          </span>
                        </td>
                        <td class="text-center ascdsc-radio">
                          <div class="custom-control custom-radio custom-control-inline pl-0">
                            <input type="radio" id="Ascradio-{{c.value}}" [checked]="c.sortbyAsc" [name]="c.value" (click)="sortingClick('asc',c,$event,i)" value="Asc">
                            <label class="custom-control-label" for="Ascradio-{{c.value}}">Asc</label>
                            <input type="radio" id="Descradio-{{c.value}}" [checked]="c.sortbyDesc" [name]="c.value" (click)="sortingClick('desc',c,$event,i)" value="Desc">
                            <label class="custom-control-label" for="Descradio-{{c.value}}">Desc</label>
                          </div>
                        </td>
                      </tr>
                    </ng-template>
                  </p-orderList>
                  <tr *ngIf="sortinglist.length == 0">
                    <td colspan="2"><small style="color:red;">Please select sortable Field from Select Column Tab</small></td>
                  </tr>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
  <app-loader [size]=60 [color]="'white'" *ngIf="loadSave" class="loader"></app-loader>
</div>
