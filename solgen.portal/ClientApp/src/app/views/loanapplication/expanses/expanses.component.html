<div class="panel-body">
  <div class="tab_container tab-style">
    <div class="responsive-tabs-container accordion-xs accordion-sm">
      <ul class="nav nav-tabs all-tabs responsive-tabs w-100">
        <li class="nav-item"><a class="nav-link active" data-toggle="tab" href="#income"> Income</a></li>
        <li class="nav-item"><a class="nav-link" data-toggle="tab" href="#debt" (click)="debt()">Debt</a></li>
        <li class="nav-item"><a class="nav-link" data-toggle="tab" href="#ratios" (click)="ratios()"> Ratios</a></li>
      </ul>
      <div class="tab-content">
        <div id="income" class="tab-pane active">
          <div class="container-fluid p-0 ">
            <div class="table-responsive">
              <form [formGroup]="incomeForm" autocomplete="off">
                <table class="table table-hover">
                  <thead>
                    <tr>
                      <th class="text-left">
                        <!--<a *ngIf="!showEditIncomeTabs" href="javascript:void(0);" class="btn btn-success mr-1" (click)="editIncome()"><i class="fa fa-pencil mr-1"></i>Edit</a>
                        <a *ngIf="showEditIncomeTabs" href="javascript:void(0);" class="btn btn-success mr-1" (click)="backIncome()"><i class="fa fa-backward mr-1"></i>Back</a>-->
                      </th>
                      <th class="text-left">Applicant</th>
                      <th *ngIf="HasCoApplicant" class="text-left">CoApplicant</th>
                      <th class="text-left">Total</th>
                    </tr>

                  </thead>
                  <tbody formArrayName="incomes">
                    <tr *ngFor="let income of incomes.controls;let i=index" [formGroupName]="i">
                      <td class="d-blue-num text-left">{{income.get('incomeType').value}}</td>
                      <td *ngIf="!showEditIncomeTabs" (keyUp)="OnKeyUp()" class="text-left">${{income.get('incomeApplicant').value}}</td>
                      <td *ngIf="!showEditIncomeTabs && HasCoApplicant" class="text-left">${{income.get('incomeCoApplicant').value}}</td>

                      <td *ngIf="showEditIncomeTabs"><input type="text" formControlName="incomeApplicant" class="form-control"></td>
                      <td *ngIf="showEditIncomeTabs && HasCoApplicant"><input type="text" formControlName="incomeCoApplicant" class="form-control"></td>
                      <!--<td *ngIf="showEditIncomeTabs"><input type="text" formControlName="incomeApplication" class="form-control"></td>-->
                      <td class="text-left">${{income.get('incomeTotal').value}}</td>

                    </tr>
                    <!--<tr>
                      <td class="d-blue-num text-left">Total</td>
                      <td>${{TotalIncomeApplicant}}</td>
                      <td *ngIf="HasCoApplicant">${{TotalIncomeCoApplicant}}</td>
                      <td>${{TotalIncomeAmount }}</td>
                    </tr>-->
                  </tbody>
                </table>
                <!--<a *ngIf="!showEditIncomeTabs" href="javascript:void(0);" class="btn btn-success float-right"  (click)="editIncome()"><i class="fa fa-pencil mr-1"></i>Edit</a>-->
                <a *ngIf="showEditIncomeTabs" href="javascript:void(0);" class="btn btn-danger float-right" (click)="backIncome()"><i class="fa fa-times mr-1"></i>Cancel</a>
                <a *ngIf="showEditIncomeTabs && isflag==true" href="javascript:void(0);" class="btn btn-success float-right mr-1" (click)="addUpdateExpenseIncome()"><i class="feather-save"></i> Submit</a>

              </form>
            </div>
          </div>
        </div>

        <div id="debt" class="tab-pane">
          <div class="container-fluid p-0" style="">
            <div class="table-responsive">
              <form [formGroup]="debtForm" autocomplete="off">
                <table class="table table-hover">
                  <thead>
                    <tr>
                      <th class="text-left">
                        <!--<a *ngIf="!showEditDebtTabs" href="javascript:void(0);" class="btn btn-success mr-1" (click)="editDebt()"><i class="fa fa-pencil mr-1"></i>Edit</a>
                        <a *ngIf="showEditDebtTabs" href="javascript:void(0);" class="btn btn-success mr-1" (click)="backDebt()"><i class="fa fa-backward mr-1"></i>Back</a>-->
                      </th>
                      <th class="text-left">Applicant</th>
                      <th *ngIf="HasCoApplicant" class="text-left">CoApplicant</th>
                      <th class="text-left">Total</th>
                    </tr>
                  </thead>
                  <tbody formArrayName="debits">
                    <tr *ngFor="let debit of debits.controls;let i=index" [formGroupName]="i">
                      <td class="d-blue-num text-left">{{debit.get('debtType').value}}</td>
                      <td *ngIf="!showEditDebtTabs" class="text-left">${{debit.get('debtApplicant').value}}</td>
                      <td *ngIf="!showEditDebtTabs && HasCoApplicant" class="text-left">${{debit.get('debtCoApplicant').value}}</td>

                      <td *ngIf="showEditDebtTabs"><input pKeyFilter="pnum" type="text" formControlName="debtApplicant" class="form-control"></td>
                      <td *ngIf="showEditDebtTabs && HasCoApplicant"><input pKeyFilter="pnum" type="text" formControlName="debtCoApplicant" class="form-control"></td>
                      <!--                      <td *ngIf="showEditDebtTabs"><input pKeyFilter="pnum" type="text" formControlName="debtApplication" class="form-control"></td>-->
                      <td class="text-left">${{debit.get('debitTotal').value}}</td>

                    </tr>

                    <!--<tr *ngIf="!showEditDebtTabs">
                      <td class="d-blue-num text-left">Total</td>
                      <td>${{TotalDebitApplicant}}</td>
                      <td *ngIf="HasCoApplicant">${{TotalDebitCoApplicant}}</td>
                      <td>${{TotalDebitAmount}}</td>
                    </tr>-->

                  </tbody>
                </table>
                <!--<a *ngIf="!showEditDebtTabs && isflag==true" href="javascript:void(0);" class="btn btn-success float-right" (click)="editDebt()"><i class="fa fa-pencil mr-1"></i>Edit</a>-->
                <a *ngIf="showEditDebtTabs" href="javascript:void(0);" class="btn btn-danger float-right" (click)="backDebt()"><i class="fa fa-times mr-1"></i>Cancel</a>
                <a *ngIf="showEditDebtTabs && isflag==true" href="javascript:void(0);" class="btn btn-success float-right mr-1" (click)="addDebt()"><i class="feather-save"></i> Submit</a>
              </form>
            </div>
          </div>
        </div>

        <div id="ratios" class="tab-pane">
          <div class="container-fluid p-0" style="">
            <div class="table-responsive">
              <table class="table table-hover">
                <thead>
                  <tr>
                    <th class="text-left"></th>
                    <th class="text-left">Applicant</th>
                    <th *ngIf="HasCoApplicant" class="text-left">CoApplicant</th>
                    <th class="text-left">Total</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let ratio of ratiosData">
                    <td class="d-blue-num text-left">{{ratio.Type}}</td>
                    <td class="text-left">{{ratio.DTI}}</td>
                    <td *ngIf="HasCoApplicant" class="text-left">{{ratio.PTI}}</td>
                    <td class="text-left">{{(ratio.Total)}}</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="panel-content px-3 pagination2 table-responsive no-padding">
              <ngx-datatable #table class="bootstrap table table-hover table-dynamic"
                             [rows]="pagedData.data"
                             [columnMode]="'force'"
                             [scrollbarH]="true"
                             [rowHeight]="'40'"
                             [headerHeight]="40"
                             [footerHeight]="40"
                             [externalPaging]="true"
                             [externalSorting]="true"
                             [loadingIndicator]="loadSave"
                             [count]="pagedData.pager.totalItems"
                             [offset]="pagedData.pager.currentPage"
                             [limit]="pagedData.pager.pageSize"
                             (page)='setPage($event)'
                             (sort)="onSort($event)">

                <ngx-datatable-column name="ID" prop="Id" [sortable]="true"></ngx-datatable-column>
                <ngx-datatable-column name="Source" prop="Source" [sortable]="true"></ngx-datatable-column>
                <ngx-datatable-column name="Include" prop="Include" [sortable]="true">
                  <ng-template let-row="row" ngx-datatable-cell-template>
                    <input type="checkbox" checked="{{row.Include}}">
                  </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="Joint" prop="Joint" [sortable]="true">
                  <ng-template let-row="row" ngx-datatable-cell-template>
                    <input type="checkbox" checked="{{row.Joint}}">
                  </ng-template>
                </ngx-datatable-column>
                <!--<ngx-datatable-column name="Category" prop="Category" [sortable]="true"></ngx-datatable-column>-->
                <ngx-datatable-column name="Party" prop="Party" [sortable]="true"></ngx-datatable-column>
                <ngx-datatable-column name="Creditor" prop="Creditor" [sortable]="true"></ngx-datatable-column>
                <ngx-datatable-column name="Open Date" prop="DateOpened" [sortable]="true">
                  <ng-template let-row="row" ngx-datatable-cell-template>
                    {{row.DateOpened | date: 'MM/dd/yyyy'}}
                  </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="Portfolio Type" prop="PortfolioType" [sortable]="true"></ngx-datatable-column>
                <ngx-datatable-column name="Balance" prop="Balance" [sortable]="true"></ngx-datatable-column>
                <ngx-datatable-column name="Scheduled Payment Amount" prop="Amount" [sortable]="true"></ngx-datatable-column>
                <ngx-datatable-column name="Payment Date" prop="LastPaymentDate" [sortable]="true">
                  <ng-template let-row="row" ngx-datatable-cell-template>
                    {{row.LastPaymentDate | date: 'MM/dd/yyyy'}}
                  </ng-template>
                </ngx-datatable-column>
                <!--<ngx-datatable-column name="Adj Amount" prop="AdjAmount" [sortable]="true"></ngx-datatable-column>

  <ngx-datatable-column name="Rating" prop="Rating" [sortable]="true"></ngx-datatable-column>-->


                <ngx-datatable-footer>
                  <ng-template ngx-datatable-footer-template
                               let-rowCount="rowCount"
                               let-pageSize="pageSize"
                               let-selectedCount="selectedCount"
                               let-currentPage="currentPage"
                               let-offset="offset"
                               let-isVisible="isVisible">
                    <div class="page-count">
                      {{rowCount}} total
                    </div>
                    <div>
                      <div style="color:black; margin-right:10px;" class="page-size-record">
                        <span style="text-align:right; width:80px;vertical-align: middle;">
                          <ng-select [searchable]="false" [items]="lstPageSize" appendTo="body" [(ngModel)]='pageSizeValue' dropzone="fixed" [clearable]="false" (change)="onChange($event)" draggable="false" [closeOnSelect]="true"
                                     bindLabel="text" bindValue="text"></ng-select>
                        </span>
                      </div>
                    </div>
                    <datatable-pager [pagerLeftArrowIcon]="'fa feather-chevrons-left'"
                                     [pagerRightArrowIcon]="'fa fa-angle-double-right'"
                                     [pagerPreviousIcon]="'fa fa-angle-left'"
                                     [pagerNextIcon]="'fa feather-chevron-left'"
                                     [page]="pagedData.pager.currentPage+1"
                                     [size]="pageSizeValue"
                                     [count]="pagedData.pager.totalItems"
                                     [hidden]="!((rowCount / pageSize) > 1)"
                                     (change)="setPage($event)">
                    </datatable-pager>
                  </ng-template>
                </ngx-datatable-footer>
              </ngx-datatable>
            </div>

          </div>
        </div>
      </div>
    </div>
  </div><div class="clearfix"></div>
</div>
